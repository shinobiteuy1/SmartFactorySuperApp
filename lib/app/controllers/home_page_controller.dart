import 'package:dio/dio.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:smart_factory_suit/app/data/models/car_card_model.dart';
import '../data/models/home_page_model.dart';
import '../http/request.dart';

class HomePageController extends GetxController {
  var homePageItem = RxList<HomePageModel>().obs();

  Future<void> getHomePage({required BuildContext context}) async {

    
    try {
      Request request = Request(
        //"https://localhost:7075/GetHomePage/thanakon.vie/G002",
        "https://192.168.41.205:8000/GetHomePage/thanakon.vie/G001",
        {},
      );
      await request.restGet().then((value) async {
        var response = value['response'];
        var statusCode = int.parse(value['status_code'].toString());
        if (statusCode == 200) {
          print('---------------');
          print(response);
          print('---------------');

          //homePageItem.assignAll(carCardModelFromJson(response.toString()));
          homePageItem.assign(homePageModelFromJson(response.toString()));
        } else {
          print(statusCode);
          print('statuscode is not 200');
          throw statusCode.toString() + " " + response["response"].toString();
        }
      });
    } catch (e) {
      throw e;
    }
  }

  Future<void> getHomePageTest() async {
    String path = 'https://192.168.41.205:8000/GetHomePage/thanakon.vie/G001';
    await Dio().get(path).then((value) => print('-----------------------------'));
  }

  void addHomePage() {
    homePageItem.assign(homePageModelFromJson("{\"name\":\"ธณากรณ์เวียงแก\",\"positionName\":\"QA/QC\",\"factoryName\":\"กุ้งระโนด\",\"labelTopBox\":\"รอรับคิว\",\"dateTopBox\":4,\"labelBottomBox\":\"รอลงคิว\",\"dateBottomBox\":1,\"templateImage\":\"CAR\",\"cardList\":[{\"checkPointId\":\"ce94c31e-b23e-4381-9528-eb38f43ab1ef\",\"transactionDate\":\"2023-04-03\",\"routeId\":\"578bf07d-0dd3-45c4-aeb1-4da1c050f190\",\"nextRouteId\":\"c2278aae-427e-4b8c-a3c7-6033baa51fe8\",\"farmCode\":\"Test-Farm-Code\",\"farmNameLoc\":\"บ่อเลี้ยงกุ้ง3\",\"farmNameEng\":\"บ่อเลี้ยงกุ้ง3\",\"pondNo\":\"5\",\"roundNo\":1,\"licensePlate\":\"กว324\",\"sealNo\":\"CPF-PACK001\",\"sealStatus\":true,\"currentStatusId\":\"c187b04a-4ecb-4a11-b62d-24d510904754\",\"currentStatusName\":\"รอเข้าโรงงาน\",\"nextStatusId\":\"c647e479-8c34-4969-b7c0-205b43a39053\",\"nextStatusName\":\"รอรับคิว\",\"updateTimestamp\":null,\"status\":true,\"createdUserId\":\"\",\"createdDate\":\"2023-04-03T16:40:28.415787+07:00\",\"lastUpdatedUserId\":\"\",\"lastUpdatedDate\":null},{\"checkPointId\":\"0841b230-6cc1-41c4-8ee3-331dc1dfca3f\",\"transactionDate\":\"2023-04-04\",\"routeId\":\"578bf07d-0dd3-45c4-aeb1-4da1c050f190\",\"nextRouteId\":\"c2278aae-427e-4b8c-a3c7-6033baa51fe8\",\"farmCode\":\"GF-002\",\"farmNameLoc\":\"ฟาร์มกุ้งทดสอบ\",\"farmNameEng\":\"ฟาร์มกุ้งทดสอบ\",\"pondNo\":\"2\",\"roundNo\":1,\"licensePlate\":\"กว224\",\"sealNo\":\"CPF-0002\",\"sealStatus\":true,\"currentStatusId\":\"c187b04a-4ecb-4a11-b62d-24d510904754\",\"currentStatusName\":\"รอเข้าโรงงาน\",\"nextStatusId\":\"c647e479-8c34-4969-b7c0-205b43a39053\",\"nextStatusName\":\"รอรับคิว\",\"updateTimestamp\":null,\"status\":true,\"createdUserId\":\"\",\"createdDate\":\"2023-04-04T15:54:12.124864+07:00\",\"lastUpdatedUserId\":\"\",\"lastUpdatedDate\":null},{\"checkPointId\":\"b1bdcccb-7382-467a-bdf5-796046a53855\",\"transactionDate\":\"2023-04-04\",\"routeId\":\"578bf07d-0dd3-45c4-aeb1-4da1c050f190\",\"nextRouteId\":\"c2278aae-427e-4b8c-a3c7-6033baa51fe8\",\"farmCode\":\"GF-002\",\"farmNameLoc\":\"ฟาร์มกุ้งทดสอบ\",\"farmNameEng\":\"ฟาร์มกุ้งทดสอบ\",\"pondNo\":\"2\",\"roundNo\":1,\"licensePlate\":\"สว414\",\"sealNo\":\"CPF-0002\",\"sealStatus\":true,\"currentStatusId\":\"c187b04a-4ecb-4a11-b62d-24d510904754\",\"currentStatusName\":\"รอเข้าโรงงาน\",\"nextStatusId\":\"c647e479-8c34-4969-b7c0-205b43a39053\",\"nextStatusName\":\"รอรับคิว\",\"updateTimestamp\":null,\"status\":true,\"createdUserId\":\"\",\"createdDate\":\"2023-04-04T15:54:25.66018+07:00\",\"lastUpdatedUserId\":\"\",\"lastUpdatedDate\":null},{\"checkPointId\":\"a989407f-3933-465a-a139-5fd33b6ecccf\",\"transactionDate\":\"2023-04-04\",\"routeId\":\"578bf07d-0dd3-45c4-aeb1-4da1c050f190\",\"nextRouteId\":\"c2278aae-427e-4b8c-a3c7-6033baa51fe8\",\"farmCode\":\"GF-002\",\"farmNameLoc\":\"ฟาร์มกุ้งทดสอบ\",\"farmNameEng\":\"ฟาร์มกุ้งทดสอบ\",\"pondNo\":\"2\",\"roundNo\":1,\"licensePlate\":\"พย414\",\"sealNo\":\"CPF-0002\",\"sealStatus\":true,\"currentStatusId\":\"c187b04a-4ecb-4a11-b62d-24d510904754\",\"currentStatusName\":\"รอเข้าโรงงาน\",\"nextStatusId\":\"c647e479-8c34-4969-b7c0-205b43a39053\",\"nextStatusName\":\"รอรับคิว\",\"updateTimestamp\":null,\"status\":true,\"createdUserId\":\"\",\"createdDate\":\"2023-04-04T15:54:33.70492+07:00\",\"lastUpdatedUserId\":\"\",\"lastUpdatedDate\":null}]}"));
    //homePageItem.assign(homePageModelFromJson(response.toString()));
    //homePageItem = homePageModelFromJson("{\"profile_page\":{\"name\":\"รปภ.001\",\"label_position_local\":\"หน้าที่\",\"label_position_eng\":\"Position\",\"position\":\"รปภ.\",\"label_factory_name_local\":\"โรงงาน\",\"label_factory_name_eng\":\"FactoryName\",\"factory_name\":\"กุ้งระโนด\",\"label_top_box_local\":\"รอเข้าโรงงาน\",\"label_top_box_eng\":\"WaitIn\",\"top_box\":\"2\",\"label_botton_box_local\":\"รอออกโรงงาน\",\"label_botton_box_eng\":\"WainOut\",\"botton_box\":\"1\"},\"car_list\":[{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"พย111\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"1\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"2\",\"label_status_car_local\":\"รอออกโรงงาน\",\"label_status_car_eng\":\"WaitingOut.\"},{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"ยว401\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์2\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"3\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"5\",\"label_status_car_local\":\"รอเข้าโรงงาน\",\"label_status_car_eng\":\"WaitingIn.\"},{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"ยว401\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์2\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"3\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"5\",\"label_status_car_local\":\"รอเข้าโรงงาน\",\"label_status_car_eng\":\"WaitingIn.\"}]}");
    //homePageItem.assign(homePageModelFromJson("{\"name\":\"รปภ.001\",\"label_position_local\":\"หน้าที่\",\"label_position_eng\":\"Position\",\"position\":\"รปภ.\",\"label_factory_name_local\":\"โรงงาน\",\"label_factory_name_eng\":\"FactoryName\",\"factory_name\":\"กุ้งระโนด\",\"label_top_box_local\":\"รอเข้าโรงงาน\",\"label_top_box_eng\":\"WaitIn\",\"top_box\":\"1\",\"label_botton_box_local\":\"รอออกโรงงาน\",\"label_botton_box_eng\":\"WainOut\",\"botton_box\":\"4\"}"));
    //"{\"profile_page\":{\"name\":\"รปภ.001\",\"label_position_local\":\"หน้าที่\",\"label_position_eng\":\"Position\",\"position\":\"รปภ.\",\"label_factory_name_local\":\"โรงงาน\",\"label_factory_name_eng\":\"FactoryName\",\"factory_name\":\"กุ้งระโนด\",\"label_top_box_local\":\"รอเข้าโรงงาน\",\"label_top_box_eng\":\"WaitIn\",\"top_box\":\"2\",\"label_botton_box_local\":\"รอออกโรงงาน\",\"label_botton_box_eng\":\"WainOut\",\"botton_box\":\"1\"},\"car_list\":[{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"พย111\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"1\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"2\",\"label_status_car_local\":\"รอออกโรงงาน\",\"label_status_car_eng\":\"WaitingOut.\"},{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"ยว401\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์2\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"3\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"5\",\"label_status_car_local\":\"รอเข้าโรงงาน\",\"label_status_car_eng\":\"WaitingIn.\"},{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"ยว401\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์2\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"3\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"5\",\"label_status_car_local\":\"รอเข้าโรงงาน\",\"label_status_car_eng\":\"WaitingIn.\"}]}"
    //homePageItem.assign();
    //homePageItem.homePageModelFromJson();
    //homePageItem.assign(homePageModelFromJson("{\"pro_file\":{\"name\":\"รปภ.001\",\"label_position_local\":\"หน้าที่\",\"label_position_eng\":\"Position\",\"position\":\"รปภ.\",\"label_factory_name_local\":\"โรงงาน\",\"label_factory_name_eng\":\"FactoryName\",\"factory_name\":\"กุ้งระโนด\",\"label_top_box_local\":\"รอเข้าโรงงาน\",\"label_top_box_eng\":\"WaitIn\",\"top_box\":\"2\",\"label_botton_box_local\":\"รอออกโรงงาน\",\"label_botton_box_eng\":\"WainOut\",\"botton_box\":\"1\"},\"car_list\":[{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"พย111\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"1\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"2\",\"label_status_car_local\":\"รอออกโรงงาน\",\"label_status_car_eng\":\"WaitingOut.\"},{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"ยว401\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์2\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"3\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"5\",\"label_status_car_local\":\"รอเข้าโรงงาน\",\"label_status_car_eng\":\"WaitingIn.\"},{\"label_plate_no_local\":\"ทะเบียน\",\"label_plate_no_eng\":\"LicensePlate\",\"plate_no\":\"ยว401\",\"label_seal_no_local\":\"เลขSeal\",\"label_seal_no_eng\":\"SealNo.\",\"seal_no\":\"CPFTH123123\",\"label_farm_name_local\":\"ชื่อฟาร์ม\",\"label_farm_name_eng\":\"FarmName\",\"farm_name\":\"ถิตบัณฑูรย์2\",\"label_round_no_local\":\"เที่ยว\",\"label_round_no_eng\":\"RoundNo.\",\"round_no\":\"3\",\"label_pond_no_local\":\"บ่อ\",\"label_pond_no_eng\":\"PondNo.\",\"pond_no\":\"5\",\"label_status_car_local\":\"รอเข้าโรงงาน\",\"label_status_car_eng\":\"WaitingIn.\"}]}"));
  }
}
